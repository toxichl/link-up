!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.linkup=t():e.linkup=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.el=t}return o(e,[{key:"setFloat",value:function(){return e.setFloat(this.el),this}},{key:"setBgColor",value:function(t){return e.setBgColor(this.el,t),this}},{key:"setWidthAndHeight",value:function(t,n){return e.setWidthAndHeight(this.el,t,n),this}},{key:"hasClass",value:function(t){return e.hasClass(this.el,t)}},{key:"addClass",value:function(t){return e.addClass(this.el,t),this}},{key:"removeClass",value:function(t){return e.removeClass(this.el,t),this}},{key:"setAttr",value:function(t,n){return e.setAttr(this.el,t,n),this}},{key:"addEvent",value:function(t,n){return e.addEvent(this.el,t,n),this}},{key:"append",value:function(t){return e.append(this.el,t),this}},{key:"mount",value:function(t){e.append(t,this)}}],[{key:"createDiv",value:function(){return document.createElement("div")}},{key:"createBtn",value:function(){return document.createElement("button")}},{key:"setFloat",value:function(e){return e.style.float="left",this}},{key:"setBgColor",value:function(e,t){return e.style.backgroundColor=t,this}},{key:"setWidthAndHeight",value:function(e,t,n){return e.style.width=t+"px",e.style.height=n+"px",this}},{key:"append",value:function(e,t){if(t instanceof HTMLElement)e.appendChild(t);else if(t.el&&t.el instanceof HTMLElement)e.appendChild(t.el);else if(Array.isArray(t)){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;e.append(u.el)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}}},{key:"hasClass",value:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},{key:"addClass",value:function(t,n){return e.hasClass(t,n)||(t.className+=t.className?" "+n:n),this}},{key:"removeClass",value:function(t,n){e.hasClass(t,n)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+n+"(\\s|$)")," "))}},{key:"setAttr",value:function(e,t,n){return e.setAttribute(t,n),this}},{key:"addEvent",value:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n,this}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){if(r(this,e),!(t instanceof HTMLElement))throw new Error("[Error] Unexpected Parameters"+t);this.element=t}return o(e,[{key:"choose",value:function(){a.default.addClass(this.element,"choosed")}},{key:"unChoose",value:function(){a.default.removeClass(this.element,"choosed")}},{key:"remove",value:function(){a.default.setBgColor(this.element,"rgb(235,237,240)"),a.default.removeClass(this.element,"choosed"),a.default.setAttr(this.element,"el-type","0")}},{key:"type",get:function(){return this.element.getAttribute("el-type")}},{key:"isChoosed",get:function(){return a.default.hasClass(this.element,"choosed")}},{key:"key",get:function(){return this.element.getAttribute("matrix-key")}},{key:"bgColor",get:function(){return this.element.style.backgroundColor}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u.default.createDiv()))}return i(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,o=e.length;r<o;r++)if((n?e[r][n]:e[r])===t)return r;return-1}function o(){switch(Math.floor(20*Math.random()/5)){case 0:return"#c6e48b";case 1:return"#7bc96f";case 2:return"#239a3b";case 3:return"#196127";default:return"#c6e48b"}}Object.defineProperty(t,"__esModule",{value:!0}),t.find=r,t.getColor=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),l=n(6),c=r(l),s=n(2),f=r(s),h=n(7),d=r(h),p=n(5),y=r(p),v=function(){function e(){o(this,e);var t=arguments,n=void 0,r=void 0,i=void 0;2===t.length?(n=r=t[0],i=t[1]):(n=t[0],r=t[1],i=t[2]),this.data=e.createMatrix(n,r,i),this.choices=new c.default}return i(e,[{key:"$mount",value:function(e){this.mountElement=e,this.dom.mount(e)}},{key:"$destory",value:function(){this.mountElement.innerHTML=null}},{key:"handle",value:function(e){if(e=new u.default(e),0==e.type)return void console.log("[Warning] Cannot choose this element!");e.isChoosed?(e.unChoose(),this.choices.delete(e)):this.linkHandle(e)}},{key:"linkHandle",value:function(t){if(this.choices.isFull){this.choices.deleteFirst().unChoose()}if(t.choose(),this.choices.push(t),this.choices.isFull){if(console.log(this.choices),!this.choices.colorCheck)return void console.info("[Warning] Cannot match color!");var n=e.linkCheck(this.data,this.choices.pointOne,this.choices.pointTwo);console.info("Result: "+n),n&&this.successLink()}}},{key:"successLink",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.choices.collection[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=i.key.split("-");this.data[a[0]][a[1]]=0,i.remove()}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}this.choices.empty()}},{key:"dom",get:function(){var t=this;return e.createDomByMatrix(this,function(e){return t.handle(e)})}}],[{key:"createDomByMatrix",value:function(t,n){if(!(t instanceof e))throw new Error("[Error] Unexpected parameters");var r=new f.default;r.addClass("matrix-container"),t.data.forEach(function(e,t){var o=new f.default;o.addClass("clearfix line-container"),e.forEach(function(e,r){var i=new y.default(e);i.setAttr("matrix-key",t+"-"+r).addEvent("click",function(e){n&&n(e.target)}),o.append(i)}),r.append(o)});var o=new d.default("New Game");o.addClass("btn btn-restart").addEvent("click",function(){t.$destory(),new e(7,.3).$mount(document.getElementById("app"))});var i=new f.default;return i.addClass("btn-wrapper"),i.append(o),r.append(i),r}},{key:"createMatrix",value:function(e,t,n){n||(n=.5);for(var r=new Array,o=0;o<e;o++){r[o]=new Array;for(var i=0;i<t;i++)r[o].push(Math.random()>=n+.1?1:0)}return r}},{key:"linkCheck",value:function(e,t,n){function r(r){var o=!0,i=!1,a=void 0;try{for(var u,l=r.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value,s=c.join();if(s!==t.join()&&s!==n.join()&&1===e[c[0]][c[1]])return!1}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return!0}var o=Array.isArray;if(!o(e)||!o(t)||!o(n))throw new Error("[Error 01] Unexpected parameters");for(var i=t[0],a=t[1],u=n[0],l=n[1],c=Math.min(i,u),s=Math.max(i,u),f=Math.min(a,l),h=Math.max(a,l),d=new Set,p=new Set,y=c;y<=s;y++)d.add([y,a]),p.add([y,l]);for(var v=f;v<=h;v++)d.add([u,v]),p.add([i,v]);return!!r(d)||!!r(p)}}]),e}();t.default=v,window.Linkup=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(3),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.setFloat().setBgColor(e?(0,l.getColor)():"rgb(235,237,240)").setAttr("el-type",e).setWidthAndHeight(35,35).addClass("martix-element"),n}return i(t,e),t}(u.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(3),l=function(){function e(t){if(r(this,e),t){if(!Array.isArray(t))throw new Error("[Error] Unexpected parameters"+t);var n=!0,o=!1,i=void 0;try{for(var u,l=t[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){if(!(u.value instanceof a.default))throw new Error("[Error] Unexpected parameters"+t)}}catch(e){o=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}}this.collection=t||[]}return o(e,[{key:"push",value:function(e){this.collection.push(e)}},{key:"deleteFirst",value:function(){return this.collection.pop()}},{key:"empty",value:function(){this.collection=[]}},{key:"delete",value:function(e){this.collection.splice((0,u.find)(this.collection,e),1)}},{key:"colorCheck",get:function(){return this.pointOneBgColor===this.pointTwoBgColor}},{key:"length",get:function(){return this.collection.length}},{key:"isFull",get:function(){return 2===this.length}},{key:"pointOne",get:function(){return this.collection[0].key.split("-")}},{key:"pointTwo",get:function(){return this.collection[1].key.split("-")}},{key:"pointOneBgColor",get:function(){return this.collection[0].bgColor}},{key:"pointTwoBgColor",get:function(){return this.collection[1].bgColor}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u.default.createBtn()));return n.el.append(e),n}return i(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default}])});